<!doctype html>
<html lang="es-MX">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Material de camión – Pull&Bear</title>

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-title" content="Material P&B">
  <link rel="apple-touch-icon" href="https://blackdevice.com/wp-content/uploads/2025/03/logo-pull-bear.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <style>
    /* Oculta scroll en toda la app */
    html, body {
      scrollbar-width: none; 
      -ms-overflow-style: none; 
    }
    html::-webkit-scrollbar,
    body::-webkit-scrollbar {
      display: none;
    }
    :root{
      --fg:#ffffff; --muted:#eaeaea; --pill:#ffffff; --pill-txt:#000; --accent:#b0f46f; --shadow:rgba(0,0,0,.25);
      --red-alert: #ff4d4d; 
      --glass-bg: rgba(255,255,255,.07);
      --glass-border: rgba(255,255,255,0.1);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--fg); font-family:"Playfair Display", serif; overflow-x:hidden;
      background:#111;
    }

    /* BACKGROUND */
    .bg{
      position:fixed; inset:0; z-index:-2; overflow:hidden;
    }
    .bg img{
      width:120%; height:120%; object-fit:cover; filter:blur(5px) brightness(.55); transform:scale(1.05);
    }
    .bg::after{
      content:""; position:absolute; inset:0;
      background:radial-gradient(ellipse at center, rgba(0,0,0,.1) 0%, rgba(0,0,0,.6) 70%);
    }

    /* HEADER */
    .topbar{background-color: #000;position:fixed; left:0px; top:0px; right:0px; display:flex; align-items:center; justify-content:space-between; z-index:1002}
    .brand{display:flex; gap:14px; align-items:center}
    .brand img{height:44px; filter:drop-shadow(0 2px 6px var(--shadow));}
    
    /* MENU LATERAL */
    #menu-btn{
      width:20px; height:20px; cursor:pointer;
      display:flex; flex-direction:column; justify-content:space-between; z-index:1003;
      font-size: clamp(22px, 3vw, 25px);
      position: fixed;
      top: 0px;
      right: 40px;
      z-index: 2000;
      color: white;
    }

    #menu-overlay{
      position:fixed; inset:0; background:rgba(0,0,0,0.4);
      opacity:0; visibility:hidden; transition:.25s; z-index:1000;
    }
    #menu-overlay.show{ opacity:1; visibility:visible; }

    #sidebar{
      position:fixed; top:0; left:-280px; width:280px; height:100vh;
      background:#000000d9; backdrop-filter:blur(6px);
      padding:80px 20px; transition:.35s ease; z-index:1001;
    }
    #sidebar.open{ left:0; }

    #sidebar a{
      display:block; color:white; font-family:Inter; font-size:18px;
      padding:12px 6px; margin-bottom:8px; border-bottom:1px solid #555;
      text-decoration:none;
    }

    /* TITLE */
    .title{ font-size: clamp(34px, 6vw, 92px); line-height:1.03; text-align:center; margin:100px 16px 28px; text-shadow: 0 6px 24px rgba(0,0,0,.45);} 

    /* LAYOUT MATERIAL */
    .grid{display:flex; grid-template-columns: 1fr 1fr; gap:18px; place-items:center; padding:12px 0 80px}
    @media (max-width:480px){ .grid{gap:12px; grid-template-columns:1fr } }
    @media (min-width:992px){ .grid{grid-template-columns: 1fr 1fr; gap:42px} }

    .card{ width:clamp(140px, 46vw, 220px); min-height:390px; position:relative; border-radius:14px; overflow:hidden; background:var(--glass-bg); backdrop-filter: blur(2px); box-shadow: 0 12px 40px rgba(0,0,0,.35);} 
    @media (min-width:768px){ .card{min-height:620px}}
    .photo{position:absolute; inset:0; display:grid; place-items:center}
    .photo img{width:100%; height:100%; object-fit:cover; filter: brightness(0.5) contrast(1.4); } 

    .panel{position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; padding:20px}
    .row{display:flex; flex-direction:column; align-items:center; gap:10px; margin-top:16px}
    
    .card-title, .card-title2, .card-title3 { font-family: "Playfair Display", serif; text-align: center; color: white; margin-top: 10px; }
    .card-title { font-size: 35px; font-weight: 700; }
    .card-title2 { font-size: 25px; font-weight: 700; }
    .card-title3 { font-size: 35px; font-weight: 700; }

    .input-linea {
      text-align: center; width: 100%; padding: 8px 4px;
      background: transparent !important; border: none !important; border-bottom: 2px solid white !important;
      color: white; font-size: 25px; outline: none !important;
    }
    .input-linea::placeholder { font-size: 15px; color: rgba(255,255,255,0.6); }

    /* =========================================
       DISEÑO CUENTA PERSONAS (SIN FONDO)
       ========================================= */
    #manual-section {
      margin: 20px auto 80px auto;
      max-width: 500px;
      padding: 0 15px;
      text-align: center;
    }
    
    .counter-card {
      background: transparent; 
      border: none;
      box-shadow: none;
      padding: 20px 0;
    }

    .counter-title {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 10px;
      color: #fff;
      text-shadow: 0 4px 12px rgba(0,0,0,0.5); 
    }

    #manual-display {
      font-family: 'Inter', sans-serif;
      font-size: clamp(80px, 15vw, 120px);
      font-weight: 700;
      color: var(--fg);
      line-height: 1;
      margin: 10px 0 40px 0;
      text-shadow: 0 4px 24px rgba(0,0,0,0.6); 
    }

    .counter-controls {
      display: flex;
      justify-content: center;
      gap: 30px; 
    }

    .btn-counter {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
      background: transparent;
      color: white;
      font-size: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      backdrop-filter: blur(4px); 
    }

    .btn-counter:active { transform: scale(0.95); }
    
    #btn-sum {
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 0 15px rgba(176, 244, 111, 0.1);
    }
    #btn-sum:hover { background: rgba(176, 244, 111, 0.1); box-shadow: 0 0 25px rgba(176, 244, 111, 0.3); }

    #btn-res {
      border-color: var(--red-alert);
      color: var(--red-alert);
      opacity: 0.8;
    }
    #btn-res:hover { background: rgba(255, 77, 77, 0.1); opacity: 1; }


    /* =========================================
       ESTILOS GENERALES SECCIONES DE DINERO
       ========================================= */
    .money-section {
        padding: 15px 15px; 
        margin-top: 30px;
        margin-bottom: 80px;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
        font-family: 'Inter', sans-serif;
        border-top: 1px solid #333; 
        padding-top: 40px;
    }

    .aco-header { text-align: center; margin-bottom: 15px; }
    .aco-header h2 { font-family: 'Playfair Display', serif; font-size: 24px; font-weight: 700; margin-bottom: 0px; }
    .aco-header h3 { font-family: 'Playfair Display', serif; font-size: 16px; font-weight: 400; color: #ccc; }

    .date-row { text-align: center; margin-bottom: 20px; }
    .fecha-dinamica { font-size: 18px; font-weight: 700; color: var(--accent); letter-spacing: 1px; }

    .personal-data-row { display: flex; gap: 20px; margin-bottom: 25px; }
    .data-group.name-group { flex: 3; display: flex; flex-direction: column; }
    .data-group.code-group { flex: 1; display: flex; flex-direction: column; }
    
    .aco-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: #aaa; margin-bottom: 4px; }
    .aco-input-text { background: transparent; border: none; border-bottom: 1px solid white; color: white; font-size: 16px; padding: 2px 0; width: 100%; outline: none; }

    .aco-money-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        align-items: start;
    }
    .col-money { display: flex; flex-direction: column; gap: 8px; }

    .money-row { 
        display: flex; align-items: flex-end; justify-content: flex-start; 
        font-size: 22px; width: 100%;
    }
    .money-label { font-weight: 400; width: 85px; text-align: left; flex-shrink: 0; }

    .money-input {
        background: transparent; border: none; border-bottom: 1px solid rgba(255,255,255,0.5);
        color: white; font-size: 22px; flex-grow: 1; width: 100%; text-align: center; outline: none; padding-bottom: 0px;
    }
    .money-input:focus { border-bottom: 2px solid var(--accent); }

    /* FOOTER MODIFICADO PARA MÁS ESPACIO */
    .footer-container {
        display: flex; 
        justify-content: space-between; 
        align-items: flex-end; 
        margin-top: 20px; 
        gap: 10px;
    }

    /* Reducimos el ancho del total para dar espacio a la derecha */
    .total-section { 
        text-align: left; 
        flex: 0 0 auto; /* No crece infinitamente */
        margin-right: 15px;
    }
    .total-display { font-size: 26px; font-weight: 400; margin-bottom: 12px; line-height: 1; white-space: nowrap; }
    .total-display span { font-weight: 700; color: var(--accent); }

    /* RENGLONES PEQUEÑOS (Importe Reflejado / Diferencia) */
    .small-calc { 
        font-size: 13px; /* <-- REDUCIDO DE 15PX A 13PX */
        margin-top: 8px; 
        display: flex; 
        justify-content: flex-start; 
        align-items: baseline; 
        gap: 6px; 
        color: #ccc; 
    }
    
    /* ESTO EVITA EL SALTO DE LÍNEA */
    .small-calc span:first-child {
        white-space: nowrap; 
    }

    .right-calc-layout .small-calc { justify-content: flex-end; }
    
    .input-money-wrapper {
        display: flex; align-items: center; border-bottom: 1px solid #777; width: 80px; padding-bottom: 2px;
    }
    .money-symbol { font-size: 13px; color: white; margin-right: 0px; }
    .small-input {
        background: transparent; border: none; color: white; text-align: right; width: 100%; font-size: 14px;
        outline: none; padding: 0;
    }

    .diff-display { font-weight: 700; font-size: 15px; }

    .signature-section { 
        text-align: center; flex: 1; display: flex; flex-direction: column; align-items: center; padding-bottom: 5px; 
    }
    .signature-line { width: 140px; height: 1px; background: white; margin-bottom: 8px; }
    #firma-nombre { font-size: 12px; font-weight: 700; text-transform: uppercase; }
    #firma-codigo { font-size: 11px; color: #ccc; }

    /* LADO DERECHO (RECARGA) CON MÁS ESPACIO */
    .calc-right-section {
        flex: 1; /* Ocupa el resto del espacio disponible */
        display: flex; 
        flex-direction: column; 
        align-items: flex-end; 
        padding-bottom: 5px;
    }

  </style>
</head>
<body>

  <div id="menu-overlay" aria-hidden="true"></div>

  <div id="sidebar" aria-hidden="true">
    <a href="#materialc" data-scroll-to="material">Contar material</a>
    <a href="#manual-section" data-scroll-to="manual">Cuenta personas</a>
    <a href="#section-recarga" data-scroll-to="recarga">Recarga ACO</a>
    <a href="#section-aco" data-scroll-to="aco">Fondo Físico ACO</a>
  </div>

  <div class="bg"><img alt="Fondo" src="https://lh3.googleusercontent.com/gps-cs-s/AC9h4npDQYuEjv4EO_3O1IvDLqZmVao04EFwANq0i1WXk39zfBz-xaJ-ZGoe5iwmxXEba8CcJ26lJMOb5wIARnWLPgTCNIvcOpoMz5473epgQHZnbflIQg9_FCn1Ycgj_li9ymQkKKe6=s1360-w1360-h1020-rw"></div>

  <div class="topbar" id="top">
    <div class="brand">
      <img alt="Pull&Bear" src="https://blackdevice.com/wp-content/uploads/2025/03/logo-pull-bear.png"/><br>  
      <div id="menu-btn" role="button" aria-label="Abrir menú">
        5092 <br>
      </div>
    </div>
  </div>

  <h1 id="materialc" class="title">Material de camion</h1>

  <main class="container-xxl px-3 px-md-4">
    <section class="grid">
      <article class="card" id="card-senora">
        <div class="photo">
          <img alt="Señora" src="https://static.pullandbear.net/assets/public/923e/6268/9cef48938b12/c6cd60b47a10/03245317250-A1M/03245317250-A1M.jpg?ts=1739446871774&w=541&f=auto"/>
        </div>
        <div class="panel">
          <div class="row"><div class="card-title">Plegables</div></div>
          <div class="ro">
            <div class="card-title2">Buffer</div>
            <div class="card-title3" id="senora-buffer">0</div>
          </div>
          <div class="ro">
            <div class="card-title2 ">Piso</div>
            <div class="card-title3" id="senora-piso">0</div>
          </div>
          <div class="row"></div>
          <div class="inputrap"> 
            <input class="input-linea" id="senora-input" inputmode="numeric" placeholder="UNIDADES"/>
          </div>
        </div>
      </article>

      <article class="card" id="card-caballero">
        <div class="photo">
          <img alt="Caballero" src="https://static.pullandbear.net/assets/public/0fa4/d009/e2014070b6c7/8d0975323189/03245520826-A1M/03245520826-A1M.jpg?ts=1735567421822&w=1082&f=auto"/>
        </div>
        <div class="panel">
          <div class="row"><div class="card-title">Plegables</div></div>
          <div class="ro">
            <div class="card-title2">Buffer</div>
            <div class="card-title3" id="caballero-buffer">0</div>
          </div>
          <div class="ro">
            <div class="card-title2">Piso</div>
            <div class="card-title3" id="caballero-piso">0</div>
          </div>
          <div class="row"></div>
          <div class="inputWrp">
            <input class="input-linea" id="caballero-input" inputmode="numeric" placeholder="UNIDADES"/>
          </div>
        </div>
      </article>
    </section>
  </main>

  <section id="manual-section">
    <div class="counter-card">
      <div class="counter-title">Cuenta Personas</div>
      <div id="manual-display">0</div>
      <div class="counter-controls">
        <button id="btn-res" class="btn-counter" aria-label="Restar">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        </button>
        <button id="btn-sum" class="btn-counter" aria-label="Sumar">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        </button>
      </div>
    </div>
  </section>

  <section id="section-recarga" class="money-section">
    <div class="aco-header">
        <h2>Recarga ACO</h2>
        <h3>Galerias Guadalajara 5092</h3>
    </div>
    <div class="date-row">
         <div class="fecha-dinamica" id="recarga-fecha">DD / MM / YYYY</div>
    </div>

    <div class="aco-money-grid">
        <div class="col-money">
            <div class="money-row"><span class="money-label">$1 =</span><input type="text" inputmode="numeric" class="money-input" data-val="1"></div>
            <div class="money-row"><span class="money-label">$2 =</span><input type="text" inputmode="numeric" class="money-input" data-val="2"></div>
            <div class="money-row"><span class="money-label">$5 =</span><input type="text" inputmode="numeric" class="money-input" data-val="5"></div>
            <div class="money-row"><span class="money-label">$10 =</span><input type="text" inputmode="numeric" class="money-input" data-val="10"></div>
            <div class="money-row"><span class="money-label">$20 =</span><input type="text" inputmode="numeric" class="money-input" data-val="20"></div>
        </div>
        <div class="col-money">
            <div class="money-row"><span class="money-label">$50 =</span><input type="text" inputmode="numeric" class="money-input" data-val="50"></div>
            <div class="money-row"><span class="money-label">$100 =</span><input type="text" inputmode="numeric" class="money-input" data-val="100"></div>
            <div class="money-row"><span class="money-label">$200 =</span><input type="text" inputmode="numeric" class="money-input" data-val="200"></div>
            <div class="money-row"><span class="money-label">$500 =</span><input type="text" inputmode="numeric" class="money-input" data-val="500"></div>
            <div class="money-row"><span class="money-label">$1,000=</span><input type="text" inputmode="numeric" class="money-input" data-val="1000"></div>
        </div>
    </div>

    <div class="footer-container right-calc-layout">
        <div class="total-section">
            <div class="total-display">Total = <span id="recarga-total">$0</span></div>
        </div>
        <div class="calc-right-section">
            <div class="small-calc">
                <span>Importe reflejado:</span>
                <div class="input-money-wrapper"><span class="money-symbol">$</span><input type="text" inputmode="numeric" id="recarga-previo" class="small-input" placeholder="0"></div>
            </div>
            <div class="small-calc">
                <span>Diferencia:</span>
                <span id="recarga-diferencia" class="diff-display">$0</span>
            </div>
        </div>
    </div>
  </section>

  <section id="section-aco" class="money-section">
    <div class="aco-header">
        <h2>Fondo físico ACO</h2>
        <h3>Galerias Guadalajara 5092</h3>
    </div>
    <div class="date-row">
         <div class="fecha-dinamica" id="aco-fecha">DD / MM / YYYY</div>
    </div>
    <div class="personal-data-row">
        <div class="data-group name-group">
            <label class="aco-label">Nombre Completo</label>
            <input type="text" class="aco-input-text" id="aco-nombre" placeholder="NOMBRE" autocomplete="off">
        </div>
        <div class="data-group code-group">
            <label class="aco-label">Codigo</label>
            <input type="text" inputmode="numeric" class="aco-input-text" id="aco-codigo" placeholder="000000" maxlength="6">
        </div>
    </div>

    <div class="aco-money-grid">
        <div class="col-money">
            <div class="money-row"><span class="money-label">$1 =</span><input type="text" inputmode="numeric" class="money-input" data-val="1"></div>
            <div class="money-row"><span class="money-label">$2 =</span><input type="text" inputmode="numeric" class="money-input" data-val="2"></div>
            <div class="money-row"><span class="money-label">$5 =</span><input type="text" inputmode="numeric" class="money-input" data-val="5"></div>
            <div class="money-row"><span class="money-label">$10 =</span><input type="text" inputmode="numeric" class="money-input" data-val="10"></div>
            <div class="money-row"><span class="money-label">$20 =</span><input type="text" inputmode="numeric" class="money-input" data-val="20"></div>
        </div>
        <div class="col-money">
            <div class="money-row"><span class="money-label">$50 =</span><input type="text" inputmode="numeric" class="money-input" data-val="50"></div>
            <div class="money-row"><span class="money-label">$100 =</span><input type="text" inputmode="numeric" class="money-input" data-val="100"></div>
            <div class="money-row"><span class="money-label">$200 =</span><input type="text" inputmode="numeric" class="money-input" data-val="200"></div>
            <div class="money-row"><span class="money-label">$500 =</span><input type="text" inputmode="numeric" class="money-input" data-val="500"></div>
            <div class="money-row"><span class="money-label">$1,000=</span><input type="text" inputmode="numeric" class="money-input" data-val="1000"></div>
        </div>
    </div>

    <div class="footer-container">
        <div class="total-section">
            <div class="total-display">Total = <span id="aco-total">$0</span></div>
            <div class="small-calc">
                <span>Fondo previo:</span>
                <div class="input-money-wrapper"><span class="money-symbol">$</span><input type="text" inputmode="numeric" id="aco-previo" class="small-input" placeholder="0"></div>
            </div>
            <div class="small-calc">
                <span>Diferencia:</span>
                <span id="aco-diferencia" class="diff-display">$0</span>
            </div>
        </div>
        <div class="signature-section">
            <div class="signature-line"></div>
            <div id="firma-nombre">NOMBRE EMPLEADO</div>
            <div id="firma-codigo">CODIGO</div>
        </div>
    </div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    
    /* === MENÚ Y NAVEGACIÓN === */
    const menuBtn = document.getElementById("menu-btn");
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("menu-overlay");
    function openMenu() { sidebar.classList.add("open"); overlay.classList.add("show"); }
    function closeMenu() { sidebar.classList.remove("open"); overlay.classList.remove("show"); }
    menuBtn.addEventListener("click", (e) => { e.stopPropagation(); if (sidebar.classList.contains("open")) closeMenu(); else openMenu(); });
    overlay.addEventListener("click", () => closeMenu());
    document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeMenu(); });
    sidebar.querySelectorAll("a[data-scroll-to]").forEach(link => {
      link.addEventListener("click", (ev) => {
        ev.preventDefault(); const target = link.getAttribute("href"); closeMenu();
        setTimeout(() => {
          const el = document.querySelector(target);
          if(el) { const top = Math.max(0, el.getBoundingClientRect().top + window.pageYOffset - 20); window.scrollTo({ top, behavior: "smooth" }); }
        }, 180);
      });
    });

    /* === LÓGICA CAMIÓN === */
    function redondear(valor){ return Math.round(Number(valor)); }
    function calcularSenora(unidades){
      const u = Number(unidades) || 0; return {buffer:redondear((u*0.6)/25/5), piso:redondear((u*0.4)/25/4)};
    }
    function calcularCaballero(unidades){
      const u = Number(unidades) || 0; return {buffer:redondear((u*0.6)/20/5), piso:redondear((u*0.4)/20/4)};
    }
    function actualizar(side, vals){
      const buf = document.getElementById(`${side}-buffer`); const pis = document.getElementById(`${side}-piso`);
      if(buf) buf.textContent = isFinite(vals.buffer)? vals.buffer : 0;
      if(pis) pis.textContent = isFinite(vals.piso)? vals.piso : 0;
    }
    const senInput = document.getElementById("senora-input");
    const cabInput = document.getElementById("caballero-input");
    function sanitize(val){ return val.toString().replace(/[^0-9.]/g,''); }
    if(senInput) senInput.addEventListener("input", (e) => { e.target.value = sanitize(e.target.value); actualizar('senora', calcularSenora(Number(e.target.value) || 0)); });
    if(cabInput) cabInput.addEventListener("input", (e) => { e.target.value = sanitize(e.target.value); actualizar('caballero', calcularCaballero(Number(e.target.value) || 0)); });

    /* === LÓGICA CUENTA PERSONAS MANUAL === */
    let contadorManual = 0;
    const manualDisplay = document.getElementById("manual-display");
    const btnSum = document.getElementById("btn-sum");
    const btnRes = document.getElementById("btn-res");

    if(btnSum){
        btnSum.addEventListener("click", () => {
            contadorManual++;
            manualDisplay.textContent = contadorManual;
            if(navigator.vibrate) navigator.vibrate(20);
        });
    }
    if(btnRes){
        btnRes.addEventListener("click", () => {
            if(contadorManual > 0) contadorManual--;
            manualDisplay.textContent = contadorManual;
            if(navigator.vibrate) navigator.vibrate(20);
        });
    }

    /* === UTILIDADES DINERO === */
    function formatMoney(num) { return num.toLocaleString('es-MX', { minimumFractionDigits: 0, maximumFractionDigits: 2 }); }
    function parseLocaleNumber(stringNumber) { if(!stringNumber) return 0; return parseFloat(stringNumber.replace(/,/g, '')) || 0; }
    function formatInputListener(e, callback) {
        let rawVal = e.target.value.replace(/[^0-9]/g, '');
        if(rawVal) e.target.value = Number(rawVal).toLocaleString('es-MX'); else e.target.value = "";
        if(callback) callback();
    }

    /* === FECHA GLOBAL === */
    const hoy = new Date();
    const meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
    const fechaStr = `${hoy.getDate()} / ${meses[hoy.getMonth()]} / ${hoy.getFullYear()}`;
    document.querySelectorAll(".fecha-dinamica").forEach(el => el.textContent = fechaStr);

    /* === RECARGA ACO === */
    const recContainer = document.getElementById("section-recarga");
    const recInputs = recContainer.querySelectorAll(".money-input");
    const recTotal = document.getElementById("recarga-total");
    const recPrev = document.getElementById("recarga-previo");
    const recDiff = document.getElementById("recarga-diferencia");

    function calcRecarga() {
        let suma = 0;
        recInputs.forEach(inp => { suma += (parseLocaleNumber(inp.value) * parseFloat(inp.dataset.val)); });
        recTotal.textContent = "$" + formatMoney(suma);
        const diff = suma - parseLocaleNumber(recPrev.value);
        recDiff.textContent = "$" + formatMoney(diff);
        recDiff.style.color = diff < 0 ? "var(--red-alert)" : "var(--accent)";
    }
    recPrev.addEventListener("input", (e) => formatInputListener(e, calcRecarga));
    recInputs.forEach(inp => inp.addEventListener("input", (e) => formatInputListener(e, calcRecarga)));

    /* === FONDO FÍSICO ACO === */
    const acoContainer = document.getElementById("section-aco");
    const acoInputs = acoContainer.querySelectorAll(".money-input");
    const acoTotal = document.getElementById("aco-total");
    const acoPrev = document.getElementById("aco-previo");
    const acoDiff = document.getElementById("aco-diferencia");
    const inpNom = document.getElementById("aco-nombre");
    const firmNom = document.getElementById("firma-nombre");
    const inpCod = document.getElementById("aco-codigo");
    const firmCod = document.getElementById("firma-codigo");

    if(inpNom) inpNom.addEventListener("input", (e) => { 
        let v = e.target.value.replace(/[^a-zA-ZñÑáéíóúÁÉÍÓÚ\s]/g, '').toUpperCase(); 
        e.target.value = v; firmNom.textContent = v || "NOMBRE EMPLEADO"; 
    });
    if(inpCod) inpCod.addEventListener("input", (e) => { 
        let v = e.target.value.replace(/[^0-9]/g, '').slice(0,6); 
        e.target.value = v; firmCod.textContent = v || "CODIGO"; 
    });

    function calcAco() {
        let suma = 0;
        acoInputs.forEach(inp => { suma += (parseLocaleNumber(inp.value) * parseFloat(inp.dataset.val)); });
        acoTotal.textContent = "$" + formatMoney(suma);
        const diff = suma - parseLocaleNumber(acoPrev.value);
        acoDiff.textContent = "$" + formatMoney(diff);
        acoDiff.style.color = diff < 0 ? "var(--red-alert)" : "var(--accent)";
    }
    acoPrev.addEventListener("input", (e) => formatInputListener(e, calcAco));
    acoInputs.forEach(inp => inp.addEventListener("input", (e) => formatInputListener(e, calcAco)));

  }); 
  </script>

</body>
</html>
